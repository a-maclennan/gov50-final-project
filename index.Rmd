---
title: "Gov 50 Final Project"
author: "Anna MacLennan"
description: "My final project"
output:
  distill::distill_article:
    self_contained: false
---

## Project thoughts

I am interested in exploring data related to the 2022 midterm elections and Asian American voters, or other data related to Asian Americans and American politics. I could potentially study Asian American voting behavior over time related to some other factor such as specific ethnicity, what generation immigrant they are, etc. Or I could look at what issues they rate as being most important to them, or whether thay're more likely to vote for Asian candidates regardless of party affiliation.

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = FALSE)

```
```{r}

library(tidyverse)
library(ggplot2)
#Options
options(
  scipen = 9,
  width = 100)
knitr::opts_chunk$set(
  echo = FALSE,
  message = FALSE,
  warning = FALSE,
  fig.align = "center")


aapi <- read.csv("aapi-final-project-data.csv")
```


```{r}
#creating variable for whether someone has experienced discrimination
#is a 1 if respondent indicated they had experience emotional bullying,
#disrespect/being ignored, and/or physical attack
aapi <- aapi |>
  drop_na(emo_bully, disrespect_ignored, phys_attack, racism_issue) |>
  mutate(
    discrim = if_else(emo_bully == 0 & disrespect_ignored == 0 & phys_attack == 0, 0, 1)
  )

filtered_aapi <- aapi |>
  filter(orig_region == "s" | orig_region == "se" | orig_region == "e") |>
  mutate(
    orig_north_south = case_when(
      orig_region == "s" ~ 0,
      orig_region == "e" ~ 1,
      orig_region == "se" ~ 0,
    ))

#Does your region of origin affect whether you care about racism?
origin_racism <- filtered_aapi |>
  #filter(orig_country == "China" | orig_country == "India") |>
  group_by(orig_region) |>
  summarize(avg_careaboutracism = mean(racism_issue), n = n()) 
```




```{r}

#Distribution of racism_issue variable
filtered_aapi |>
  mutate(
    racism_label = if_else(racism_issue == 1, "Yes", "No")
  ) |>
  ggplot(mapping = aes(x = racism_label)) + 
  geom_bar() +
  labs(x = "Is Racism one of Your Top Three Most Important Political Issues?",
       y = "Count", title = "Relative Salience of Racism") 

```



```{r}
#Multiple Regression
racism_affected <- lm(racism_issue ~ discrim + orig_region, data = filtered_aapi)

racism_affected

#scatterplot of whether experiencing racism makes you more likely to care about racism politically
filtered_aapi |>
  ggplot(mapping = aes(x = racism_issue, y = discrim)) +
  geom_point(alpha = 0.0075, size = 5) +
  geom_smooth(color = "indianred1", se = FALSE, method = "lm") 

#Relative salience of racism based experience with racism
filtered_aapi |>
  mutate(
    racism_label = if_else(racism_issue == 1, "Racism Among Top Three Issues", "Racism NOT Among Top Three Issues"),
    Discrimination = if_else(discrim == 1, "Have Experienced", "Not Experienced")
  ) |>
  ggplot(mapping = aes(x = racism_label, fill = Discrimination)) + 
  geom_bar(position = "dodge") +
  labs(x = "Political Importance of Racism",
       y = "Count", title = "Relative Salience of Racism By Personal Experience with Discrimination", 
       subtitle = "Does experiencing racism affect how politically important Asian Americans consider it?")

  ##Relative salience of racism based on origin region
filtered_aapi |>
  mutate(
    racism_label = if_else(racism_issue == 1, "Racism Among Top Three Issues", "Racism NOT Among Top Three Issues"),
    `Origin Region` = case_when(
        orig_region == "s" ~ "South Asia",
        orig_region == "e" ~ "East Asia",
        orig_region == "se" ~ "Southeast Asia",
    )
  ) |>
  ggplot(mapping = aes(x = racism_label, fill = `Origin Region`)) + 
  geom_bar(position = "dodge") +
  labs(x = "Is Racism one of Your Top Three Most Important Political Issues?",
       y = "Respondents", 
       title = "Relative Salience of Racism By Origin Region") +
  scale_fill_manual(values = c(`East Asia` = "dodgerblue3", 
                               `South Asia` = "firebrick3", 
                               `Southeast Asia` = "darkolivegreen3"))

  
```

## Confidence Interval -- Is discrimination statistically significant?

The average treatment effect (ATE) of discrimination on the political salience of racism is 0.30
Our null hypothesis is that discrimination has no actual effect. We will use a test level of 0.05, so if a 95% confidence interval doesn't include 0, we will be able to reject the null hypothesis and conclude that discrimination *does* have a statistically significant effect on whether Asian Americans rank racism among th top three issues most important to them politically.

Calculated with a bootstrap method,the 95% confidence interval for this ATE is 0.189 to 0.496
This 95% confidence interval does *not* include 0, so we can reject the null hypothesis. This means that personally experiencing discrimination *does* have a statistically significant effect on the political salience of racism among Asian Americans (an increase). We can reject the null hypothesis of no difference in means with a test


```{r}
library(infer)

#Does experiencing discrimination make you care more about racism?
#ate for discrimination on racism's political salience --> 0.30
avg_racism_care_discrim <- aapi |>
  mutate(discrim = if_else(discrim == 0, "No Discrim", "Yes Discrim")) |>
  group_by(discrim) |>
  summarize(avg_careaboutracism = mean(racism_issue)) |>
  pivot_wider(names_from = discrim, values_from = avg_careaboutracism) |>
  mutate(
    ATE_discrim =`Yes Discrim` - `No Discrim`
    )

avg_racism_care_discrim


#Using Bootstrap to calculate 95% confidence interval for ATE of discrimination on racism's political salience
#confidence interval is 0.189 to 0.496, 
ate_boots_discrim <- filtered_aapi |>
  mutate(discrim = if_else(discrim == 0, "No Discrim", "Yes Discrim")) |>
  specify(racism_issue ~ discrim) |>
  generate(reps = 1000, type = "bootstrap") |>
  calculate(stat = "diff in means", order = c("Yes Discrim", "No Discrim")) |>
  get_ci(level = 0.95, type = "percentile") 
  #visualize()

ate_boots_discrim



```








